# –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–æ–Ω—É—Å–æ–≤

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ª—ë–≥–∫–∏–π HTTP-—Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∏–º–∏—Ç–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–µ–±—Ö—É–∫–æ–≤ Telegram –∏
–≤—ã–¥–∞—ë—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ–Ω—É—Å–Ω–æ–º –±–∞–ª–∞–Ω—Å–µ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–π –≤–µ—Ä—Å–∏–∏,
—Å–µ—Ä–≤–µ—Ä –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö Python-–±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –≠–Ω–¥–ø–æ–∏–Ω—Ç `GET /` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞ –∏ –ø–æ–¥—Å–∫–∞–∑–∫—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- –≠–Ω–¥–ø–æ–∏–Ω—Ç `POST /webhook` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç JSON c –¥–∞–Ω–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏.
  –ï—Å–ª–∏ –∫–æ–Ω—Ç–∞–∫—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é, —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –±–æ–Ω—É—Å–∞—Ö.
- –¢–µ–ª–µ—Ñ–æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –∫ —Ñ–æ—Ä–º–∞—Ç—É –∏–∑ 11 —Ü–∏—Ñ—Ä (–Ω–∞—á–∏–Ω–∞—è —Å `7`).
- –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ª–æ–≥–∞—Ö –º–∞—Å–∫–∏—Ä—É—é—Ç—Å—è.
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö —É–ø—Ä–æ—â–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞.

## –ó–∞–ø—É—Å–∫

```bash
python main.py
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ä—Ç—É–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É `8000`. –ü–æ—Ä—Ç –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `PORT`:

```bash
PORT=8080 python main.py
```

## –ü–µ—Ä–µ–¥–∞—á–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–¢–µ—Å—Ç–æ–≤—É—é –±–∞–∑—É –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å, –ø–µ—Ä–µ–¥–∞–≤ –ø—É—Ç—å –∫ JSON-—Ñ–∞–π–ª—É –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `BONUS_DATA_FILE`.
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞:

```json
{
  "+7 (999) 000-00-00": {
    "first_name": "–ò—Ä–∏–Ω–∞",
    "loyalty_level": "gold",
    "bonus_balances": 1250,
    "last_visit": "2024-08-15"
  }
}
```

–î–ª—è –∑–∞–ø–∏—Å–µ–π –±–µ–∑ —è–≤–Ω–æ–≥–æ –ø–æ–ª—è `"expire_date"` —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç –¥–∞—Ç—ã `last_visit`
–Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `DEFAULT_EXPIRY_DAYS` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 365 –¥–Ω–µ–π).

## –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

```bash
curl -X POST http://localhost:8000/webhook \
  -H "Content-Type: application/json" \
  -d '{
        "message": {
          "from": {"id": 101, "first_name": "–ò—Ä–∏–Ω–∞"},
          "contact": {"phone_number": "+7 (999) 000-00-00", "user_id": 101}
        }
      }'
```

–û—Ç–≤–µ—Ç:

```json
{"reply":"üëã –ò—Ä–∏–Ω–∞, —É –í–∞—Å –Ω–∞–∫–æ–ø–ª–µ–Ω–æ –±–æ–Ω—É—Å–æ–≤ 1250 —Ä—É–±–ª–µ–π.\n–í–∞—à —É—Ä–æ–≤–µ–Ω—å –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ ‚Äî gold.\n–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –±–æ–Ω—É—Å–æ–≤: –¥–æ 2025-08-15."}
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10 –∏–ª–∏ –Ω–æ–≤–µ–µ (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
